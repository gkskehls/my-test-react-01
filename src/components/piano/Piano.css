.piano {
    display: flex;
    position: relative;
    background-color: #333;
    padding: 10px; /* 패딩 조정 */
    border-radius: 10px;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
    margin-top: 2rem;
    width: 100%; /* piano-wrapper에 맞게 꽉 채움 */
    box-sizing: border-box;
}

/* === ⭐️ 새로 추가된 컨테이너 스타일 ⭐️ === */
.key-container {
    position: relative;
    /*
      이 컨테이너가 flex item이 됩니다.
      flex-grow: 1 -> 모든 컨테이너가 동일한 비율로 공간을 차지하고 늘어납니다.
      flex-shrink: 1 -> 공간이 부족할 때 동일한 비율로 줄어듭니다.
      flex-basis: 0 -> 초기 크기를 0으로 설정하여 grow/shrink 비율이 더 정확하게 적용됩니다.
    */
    flex: 1 1 0;
    min-width: 30px; /* 흰 건반의 최소 너비 보장 */
    max-width: 60px; /* 흰 건반의 최대 너비 설정 */
}

.key {
    cursor: pointer;
    border: 1px solid #000;
    box-shadow: inset 0 -2px 5px rgba(0, 0, 0, 0.3);
    box-sizing: border-box;
    transition: background-color 0.1s, box-shadow 0.1s, transform 0.05s ease-out;
}

.key-note-name {
    position: absolute;
    bottom: 10px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 14px;
    font-weight: bold;
    pointer-events: none;
    user-select: none;
}

.white-key .key-note-name {
    color: #888;
}

.black-key .key-note-name {
    color: #ccc;
    font-size: 12px;
}

.key:active,
.key.active {
    background-color: #61dafb;
    box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.5);
}

/* === 수정된 흰 건반 스타일 === */
.white-key {
    width: 100%; /* 부모인 .key-container의 너비를 항상 100% 채웁니다. */
    height: 240px;
    background-color: white;
    border-radius: 0 0 5px 5px;
    position: relative; /* z-index가 동작하도록 position 추가 */
    z-index: 1;
}

.white-key:active,
.white-key.active {
    transform: translateY(2px);
}

/* === ⭐️ 완전히 새로워진 검은 건반 위치 계산 ⭐️ === */
.black-key {
    /* 너비는 고정값 또는 %로 설정할 수 있습니다. */
    width: 60%;
    max-width: 38px;
    height: 140px;
    background: linear-gradient(to bottom, #444, #222);
    border-radius: 0 0 3px 3px;
    position: absolute;
    z-index: 2;

    /* === 수정된 부분: top 속성 추가 === */
    top: 0; /* 부모 컨테이너의 상단에 위치하도록 명시합니다. */

    /*
      위치를 계산하는 방식이 매우 간단해집니다.
      1. left: 100% -> 부모(.key-container)의 오른쪽 끝에 붙입니다.
      2. transform: translateX(-50%) -> 자기 너비의 절반만큼 왼쪽으로 이동하여 중앙에 위치시킵니다.
    */
    left: 100%;
    transform: translateX(-50%);
}

.black-key:active,
.black-key.active {
    /* 기존 transform에 눌림 효과를 추가합니다. */
    transform: translateX(-50%) translateY(2px);
}

/* 미디어 쿼리는 이제 건반 높이만 조절하면 됩니다. */
@media (max-width: 768px) {
    .white-key {
        height: 180px;
    }
    .black-key {
        height: 100px;
    }
}

@media (max-width: 480px) {
    .white-key {
        height: 150px;
    }
    .black-key {
        height: 80px;
    }
}